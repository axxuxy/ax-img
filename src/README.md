# 源码目录结构和功能说明
***
## 目录结构

* **background.js------electron 程序入口.**

* **min.js----------------vue 入口。**  
引入并加载 element-ui ， vuex ， vue-route 并注册根组件。

* **App.vue-------------vue 根组件。**  
包含一个头部组件 [v-header](#user-content-v-header) 和[主路由视区](#user-content-views)。

* **[route----------------vue-router 模块。](#user-content-route)**

* **[views----------------vue-router 路由视图组件。](#user-content-views)**

* **[store----------------vuex 模块。](#user-content-store)**

* **[components--------vue 组件。](#user-content-components)**

* **[tools----------------工具模块。](#user-content-tools)**

* **[assets---------------静态资源目录。](#user-content-assets)**
***
## route
**vue-router 模块** 

主共有两条主路由：
### "/down" ： 
* 说明 ： 下载管理器视图路由，用 [Down](#user-content-down) 视图显示。
### "/posts/:website"：
* 说明 ： 帖子组路由，用 [Posts](#user-content-posts) 视图显示。
* 包含子路由 ： 
    1. **""** ： 无标签，显示组件同下。
    2. **":tag"** ： 有标签，用 [v-posts](#user-content-v-posts) 展示。
***
## views
**vue路由根视图组件。**

包含以下两个视图 ： 
### Down
* 说明 ： 下载管理器
* 功能 ： 
   1. 检测是否存在正在下载的帖子，没有则显示跳转入帖子组路由。
   2. 显示下载组件和下载完成组件。
* 包含组件 ： 
   1. 下载组件 ： [downing](#user-content-downing)
   2. 下载完成组件 ： [downed](#user-content-downed)
### Posts
* 说明 ： 帖子组
* 功能 ： 
   1. 显示历史打开的标签，可以通过标签跳转不同的帖子组。  
   2. 显示路由，根据站点和标签缓存不同的子路由。
* 包含路由组件 ： 
   1. 帖子组组件 ： [v-posts](#user-countent-v-posts)
***
## store
**vuex**

主要有站点的设置信息和打开过的标签记录 ： 
* **状态**：根状态只包含启动程序的时间。  
* **子状态** ：
    1. **website** ：
        * **说明** ： 主要用来保存站点本身信息  
        * **状态** ：
            1. **websites** ： 站点信息组  
                * 数据类型 ： 对象  
                * 说明 ： 对象键名为站点名，对象属性值为对应键名的站点信息，站点的url属性为站点地址，站点的tags属性为在该站点打开的标签列表，站点dir属性为该站点的默认储存目录。
            2. **all_tags** ： 打开过的全部标签  
                * 数据类型 ： 数组
            3. **show_website** ： 最近打开的站点  
                * 数据类型 ： 字符串

    2. **down** ：
        * **说明** ： 保存下载管理器信息
        * **状态** ： 
            1. **down** ： 储存未完成下载的下载单元。
                * 数据类型 ： 数组
            2. **downing** ： 储存等待下载的单元。
                * 数据类型 ： Set
                * 说明 ： 之所以用 Set 是因为操作方便，down之所以为数组是因为 vue 对 Set 视图渲染不友好。
            3. **downed** ： 储存已下载完成的单元。
                * 数据类型 ： 数组
            4. **max_down** ： 最大下载数
                * 数据类型 ： 数字
            5. **down_count** ： 正在下载数
                * 数据类型 ： 数字
            6. **message** ： 提示信息
                * 数据类型 ：对象
                * 说明 ： 由于下载是在该状态管理器中进行，无法使用vue实例的方法。下载完成或发生异常时对该状态进行修改，通过暴露给外部的组件监听到改变时进行消息显示给视图。
***
## components
**vue 组件**

组件目录 ： 
### head ：
* 说明 ： 头部组件
* 功能 ： 用来打开显示站点帖子组视图和路由视图，菜单组件的显示控制，输入标签搜索功能待开发。
* 包含组件 ：
    1. #### v-header
        * 文件名 ： index.vue
        * 说明 ： 主组件
    2. #### v-website
        * 文件名 ： website.vue
        * 说明 : 站点组件
        * 功能 ： 打开要进入的站点路由视图，已是本路由视图则打开默认路由。
    3. #### menu
       * 说明 ： 菜单组件
       * 功能 ： 设置搜索帖子的安全等级设置和默认下载路径设置。
### posts ：
* 说明 ： 帖子组
* 功能 ： 用于帖子组路由的子组件。用来显示帖子组。
* 包含组件 ：
    1. #### v-posts
        * 文件名 ： index.vue
        * 说明 ： 主组件
    2. [loaging](#user-content-loading) ： 显示拉取帖子组时加载进度。
    3. [v-img](#user-content-v-img) ： 图片组件。
    4. #### post
        * 说明 ： 帖子组件
        * 功能 ： 显示帖子详细信息。显示样图并选择对应的操作。
        * 包含组件 ： [v-img](#user-content-v-img)
### dowm ：
* 说明 ： 下载管理器组件
* 包含组件 ：
    #### downing
    * 说明 ： 未下载完成单元组件
    * 功能 ： 对下载单元进行停止、开始、重新开始、移除下载单元操作。对下载单元下载状态进行显示。
    #### downed
    * 说明 ： 下载完成单元组件
    * 功能 ： 显示下载图片的下载名、下载时间、图片文件大小、图片文件尺寸大小等信息。对图片进行重新下载、查看图片、在文件夹打开、删除等操作。
### tools ：
* 说明 ： 工具组件
* 包含组件 ：
    #### v-img
    * 文件名： img.vue
    * 说明 ： 图片组件
    * 功能 ： 当图片加载失败时加载默认图片，并设置是否自动或手动重新。
    #### loading
    * 说明 ： 加载进度条显示组件
    * 功能 ： 显示加载进度。
***
## tools
**工具模块**

工具模块包含：
### mkdir.js
* 说明 ： 用于检测目录是否存在，不存在则直接创建目录。
### get.js
* 说明 ： 用于数据请求，仅处理json数据，其他数据会当作异常处理。本来用axios的有跨域问题。然后用node的发现很慢？应该是有我没太注意的地方，最后改用electron的net模块了。
### down.js
* 说明 ： 图片下载，用node的请求写的，electron的net的响应居然用管道报错，emm。  
* 依赖 ：
    1. [mkdir.js](#user-content-mkdirjs) ： 用于检测和创建下载缓存目录
### moveFile.js
* 说明 ： 移动文件。目标路径和目的路径在相同根目录则直接改名，否则用fs模块创建读写流写入目的地址并删除旧文件。  
* 依赖：
    1. [mkdir.js](#user-content-mkdirjs) ： 说明当目的地址不存在且指定创建目录则直接创目录。
***
## assets
 **静态资源目录**

 资源包含 ：
1. **css--css文件** ： 清除浏览器默认设置并设置自己的默认样式。
2. **img-图片资源**
3. **sass-scss文件** ： 一些scss函数
4. **ttf---字体文件**